---
import BaseLayout from "../layouts/BaseLayout.astro";
import ProjectCard from "../components/ProjectCard.astro";
import { projects } from "../data/projects";
---

<BaseLayout
  title="Projects — Raman Kumar"
  description="Explore my portfolio of Android apps, computer vision projects, and web applications."
>
  <section class="max-w-5xl mx-auto px-4 py-16">
    <!-- Breadcrumb -->
    <div class="mb-4">
      <span class="font-mono text-sm">
        <a
          href="/"
          class="text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors"
          >~/raman-kumar</a
        >

        <span class="text-slate-500 dark:text-slate-400">/</span>
        <span class="text-slate-700 dark:text-slate-300">projects</span>
      </span>
    </div>
    <!-- Header -->
    <div class="border-l-4 border-slate-900 dark:border-white pl-6 mb-12">
      <h1 class="text-4xl md:text-5xl font-bold mb-4">All Projects</h1>
      <p class="text-xl text-slate-600 dark:text-slate-400">
        Android • Computer Vision • Web Development
      </p>
    </div>

    <!-- Filters -->
    <div class="mb-8 border-b-2 border-slate-200 dark:border-slate-800">
      <div class="flex flex-wrap gap-1">
        <button
          data-filter="all"
          class="filter-btn px-4 py-2 font-medium border-b-2 border-slate-900 dark:border-white transition-colors"
        >
          All
        </button>
        <button
          data-filter="android"
          class="filter-btn px-4 py-2 font-medium border-b-2 border-transparent hover:border-green-500 transition-colors"
        >
          Android
        </button>
        <button
          data-filter="web"
          class="filter-btn px-4 py-2 font-medium border-b-2 border-transparent hover:border-blue-500 transition-colors"
        >
          Web
        </button>
        <button
          data-filter="ml"
          class="filter-btn px-4 py-2 font-medium border-b-2 border-transparent hover:border-purple-500 transition-colors"
        >
          Computer Vision
        </button>
      </div>
    </div>

    <!-- Projects Grid -->
    <div
      id="projects-grid"
      class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"
    >
      {
        projects
          .sort((a, b) => b.date.getTime() - a.date.getTime())
          .map((project) => (
            <div data-category={project.category} class="project-item">
              <ProjectCard {...project} />
            </div>
          ))
      }
    </div>
  </section>
</BaseLayout>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const filterButtons = document.querySelectorAll(".filter-btn");
    const projectItems = document.querySelectorAll(
      ".project-item",
    ) as NodeListOf<HTMLElement>;

    filterButtons.forEach((button) => {
      button.addEventListener("click", () => {
        const filter = button.getAttribute("data-filter");

        // Update active button styling
        filterButtons.forEach((btn) => {
          btn.classList.remove("border-slate-900", "dark:border-white");
          btn.classList.add("border-transparent");
        });
        button.classList.remove("border-transparent");
        button.classList.add("border-slate-900", "dark:border-white");

        // Filter projects
        projectItems.forEach((item) => {
          if (
            filter === "all" ||
            item.getAttribute("data-category") === filter
          ) {
            item.style.display = "block";
          } else {
            item.style.display = "none";
          }
        });
      });
    });
  });
</script>
