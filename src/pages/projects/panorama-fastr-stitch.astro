---
import BaseLayout from "../../layouts/BaseLayout.astro";
---

<BaseLayout
  title="Panorama FastR-Stitch — Raman Kumar"
  description="High-performance panorama stitching using MATLAB with custom FAST detection and RANSAC homography."
>
  <article class="max-w-5xl mx-auto px-4 py-12">
    <!-- Breadcrumb -->
    <!-- Breadcrumb -->
    <div class="mb-8">
      <span class="font-mono text-sm">
        <a
          href="/"
          class="text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors"
          >~/raman-kumar</a
        >
        <span class="text-slate-500 dark:text-slate-400">/</span>
        <a
          href="/projects"
          class="text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors"
          >projects</a
        >
        <span class="text-slate-500 dark:text-slate-400">/</span>
        <span class="text-slate-700 dark:text-slate-300"
          >panorama-fastR-stitch</span
        >
      </span>
    </div>

    <!-- Header -->
    <header
      class="mb-12 border-l-4 border-purple-500 pl-6 bg-slate-50 dark:bg-slate-900 border-2 border-slate-200 dark:border-slate-800 p-8"
    >
      <div class="space-y-4">
        <div class="flex items-center gap-3 flex-wrap">
          <span
            class="px-3 py-1 text-xs font-mono uppercase bg-purple-500 text-white"
          >
            Computer Vision
          </span>
          <span class="text-sm text-slate-600 dark:text-slate-400">
            March 2024
          </span>
        </div>

        <h1 class="text-4xl md:text-5xl font-bold">Panorama FastR-Stitch</h1>

        <p class="text-lg text-slate-600 dark:text-slate-400 max-w-2xl">
          High-performance panorama stitching using MATLAB with custom FAST
          corner detection, SURF descriptors, and RANSAC homography estimation.
        </p>

        <div class="flex flex-wrap gap-3">
          <a
            href="https://github.com/Gherra/Panorama-FastR-Stitch"
            target="_blank"
            rel="noopener noreferrer"
            class="px-5 py-2 bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-medium border-2 border-slate-900 dark:border-white hover:bg-white dark:hover:bg-slate-900 hover:text-slate-900 dark:hover:text-white transition-colors"
          >
            View Code
          </a>
        </div>
      </div>
    </header>

    <!-- Stats Grid -->
    <section class="mb-8 grid grid-cols-2 md:grid-cols-4 gap-4">
      <div class="stat-card">
        <div
          class="text-xs font-mono uppercase text-slate-500 dark:text-slate-400 mb-1"
        >
          Images
        </div>
        <div class="text-xl font-bold">2–20</div>
      </div>
      <div class="stat-card">
        <div
          class="text-xs font-mono uppercase text-slate-500 dark:text-slate-400 mb-1"
        >
          Detection
        </div>
        <div class="text-sm font-semibold">FAST + Harris</div>
      </div>
      <div class="stat-card">
        <div
          class="text-xs font-mono uppercase text-slate-500 dark:text-slate-400 mb-1"
        >
          Matching
        </div>
        <div class="text-sm font-semibold">SURF + RANSAC</div>
      </div>
      <div class="stat-card">
        <div
          class="text-xs font-mono uppercase text-slate-500 dark:text-slate-400 mb-1"
        >
          Speed
        </div>
        <div class="text-xl font-bold">&lt;2s</div>
      </div>
    </section>

    <!-- Results Section -->
    <section class="mb-8">
      <h2 class="text-2xl font-bold mb-6 text-center">
        Results (inputs → panorama)
      </h2>

      <!-- Set 1: WAC Bennett Library -->
      <div class="card p-6 mb-6">
        <h3 class="text-lg font-semibold mb-4">
          Set 1: WAC Bennett Library (2 images → panorama)
        </h3>
        <div class="grid grid-cols-2 gap-3 mb-4">
          <div
            class="border-2 border-slate-200 dark:border-slate-800 overflow-hidden"
          >
            <img
              src="/images/panorama/library-1.png"
              alt="Library input 1"
              class="w-full h-auto object-cover"
            />
          </div>
          <div
            class="border-2 border-slate-200 dark:border-slate-800 overflow-hidden"
          >
            <img
              src="/images/panorama/library-2.png"
              alt="Library input 2"
              class="w-full h-auto object-cover"
            />
          </div>
        </div>
        <div
          class="border-2 border-slate-200 dark:border-slate-800 overflow-hidden"
        >
          <img
            src="/images/panorama/library-panorama.png"
            alt="Library panorama result"
            class="w-full h-auto object-contain"
          />
        </div>
      </div>

      <!-- Set 2: Academic Building -->
      <div class="card p-6 mb-6">
        <h3 class="text-lg font-semibold mb-4">
          Set 2: Academic Building (4 images → panorama)
        </h3>
        <div class="grid grid-cols-4 gap-2 mb-4">
          <div
            class="border-2 border-slate-200 dark:border-slate-800 overflow-hidden"
          >
            <img
              src="/images/panorama/academic-1.png"
              alt="Academic input 1"
              class="w-full h-auto object-cover"
            />
          </div>
          <div
            class="border-2 border-slate-200 dark:border-slate-800 overflow-hidden"
          >
            <img
              src="/images/panorama/academic-2.png"
              alt="Academic input 2"
              class="w-full h-auto object-cover"
            />
          </div>
          <div
            class="border-2 border-slate-200 dark:border-slate-800 overflow-hidden"
          >
            <img
              src="/images/panorama/academic-3.png"
              alt="Academic input 3"
              class="w-full h-auto object-cover"
            />
          </div>
          <div
            class="border-2 border-slate-200 dark:border-slate-800 overflow-hidden"
          >
            <img
              src="/images/panorama/academic-4.png"
              alt="Academic input 4"
              class="w-full h-auto object-cover"
            />
          </div>
        </div>
        <div
          class="border-2 border-slate-200 dark:border-slate-800 overflow-hidden"
        >
          <img
            src="/images/panorama/academic-panorama.png"
            alt="Academic panorama result"
            class="w-full h-auto object-contain"
          />
        </div>
      </div>

      <!-- Set 3: Reflection Pond -->
      <div class="card p-6 mb-6">
        <h3 class="text-lg font-semibold mb-4">
          Set 3: Reflection Pond (4 images → panorama)
        </h3>
        <div class="grid grid-cols-4 gap-2 mb-4">
          <div
            class="border-2 border-slate-200 dark:border-slate-800 overflow-hidden"
          >
            <img
              src="/images/panorama/pond-1.png"
              alt="Pond input 1"
              class="w-full h-auto object-cover"
            />
          </div>
          <div
            class="border-2 border-slate-200 dark:border-slate-800 overflow-hidden"
          >
            <img
              src="/images/panorama/pond-2.png"
              alt="Pond input 2"
              class="w-full h-auto object-cover"
            />
          </div>
          <div
            class="border-2 border-slate-200 dark:border-slate-800 overflow-hidden"
          >
            <img
              src="/images/panorama/pond-3.png"
              alt="Pond input 3"
              class="w-full h-auto object-cover"
            />
          </div>
          <div
            class="border-2 border-slate-200 dark:border-slate-800 overflow-hidden"
          >
            <img
              src="/images/panorama/pond-4.png"
              alt="Pond input 4"
              class="w-full h-auto object-cover"
            />
          </div>
        </div>
        <div
          class="border-2 border-slate-200 dark:border-slate-800 overflow-hidden"
        >
          <img
            src="/images/panorama/pond-panorama.png"
            alt="Pond panorama result"
            class="w-full h-auto object-contain"
          />
        </div>
      </div>
    </section>

    <!-- At a Glance -->
    <section class="mb-8 card p-6 border-l-4 border-purple-500">
      <h2 class="text-xl font-bold mb-4">Overview</h2>
      <ul class="space-y-2 text-slate-600 dark:text-slate-300 text-sm">
        <li>
          <strong class="text-slate-900 dark:text-slate-100">Problem:</strong> Stitching
          multiple images into seamless panoramas with accurate alignment and minimal
          distortion.
        </li>
        <li>
          <strong class="text-slate-900 dark:text-slate-100">Solution:</strong> Custom
          implementation using FAST corner detection, SURF descriptors, RANSAC homography,
          and multi-band blending.
        </li>
      </ul>
    </section>

    <!-- Main Content -->
    <div
      class="card prose prose-slate dark:prose-invert max-w-none
            prose-headings:scroll-mt-24
            prose-h2:text-2xl prose-h2:font-bold prose-h2:mt-10 prose-h2:mb-4
            prose-h3:text-lg prose-h3:font-semibold prose-h3:mt-6 prose-h3:mb-3
            prose-p:text-slate-700 dark:prose-p:text-slate-300
            prose-p:leading-relaxed
            prose-a:text-purple-600 dark:prose-a:text-purple-400 hover:prose-a:underline
            prose-strong:text-slate-900 dark:prose-strong:text-slate-100
            px-6 py-8"
    >
      <h2>Problem & Motivation</h2>
      <p>
        Panorama stitching requires accurate feature detection, robust matching
        across varying viewpoints, and seamless blending to avoid visible seams.
        The goal was to implement a fast, reliable pipeline from scratch in
        MATLAB.
      </p>

      <h2>Pipeline Overview</h2>
      <ol>
        <li>
          <strong>Feature Detection:</strong> FAST corner detection with Harris score
          filtering
        </li>
        <li>
          <strong>Feature Description:</strong> SURF descriptors for rotation and
          scale invariance
        </li>
        <li>
          <strong>Feature Matching:</strong> Nearest neighbor matching with ratio
          test
        </li>
        <li>
          <strong>Geometric Verification:</strong> RANSAC to estimate homography
          and filter outliers
        </li>
        <li>
          <strong>Image Warping:</strong> Perspective transformation to common coordinate
          system
        </li>
        <li>
          <strong>Blending:</strong> Multi-band blending for seamless transitions
        </li>
      </ol>

      <h2>Technical Implementation</h2>

      <h3>FAST Corner Detection</h3>
      <p>
        Custom implementation of the FAST (Features from Accelerated Segment
        Test) algorithm:
      </p>
      <ul>
        <li>Tests 16 pixels in a circle around each candidate point</li>
        <li>
          Marks as corner if 12+ contiguous pixels are brighter or darker than
          threshold
        </li>
        <li>Applies non-maximum suppression to avoid clustering</li>
        <li>Uses Harris corner response for sub-pixel accuracy</li>
      </ul>

      <h3>RANSAC Homography</h3>
      <p>
        RANSAC (Random Sample Consensus) used to robustly estimate homography:
      </p>
      <ul>
        <li>Randomly samples 4 point correspondences</li>
        <li>Computes homography matrix H</li>
        <li>Counts inliers (points within distance threshold)</li>
        <li>Repeats for 1000+ iterations to achieve 99.9% confidence</li>
        <li>Re-estimates H using all inliers for final transformation</li>
      </ul>

      <h3>Multi-Band Blending</h3>
      <p>Laplacian pyramid blending eliminates seam artifacts:</p>
      <ul>
        <li>Builds Gaussian pyramid (progressive downsampling)</li>
        <li>Computes Laplacian pyramid (bandpass filters)</li>
        <li>Blends at each frequency band separately</li>
        <li>Reconstructs final image from blended pyramids</li>
      </ul>

      <h2>Key Features</h2>
      <div class="not-prose mt-6 grid gap-4 md:grid-cols-2">
        <div class="card p-5">
          <h3
            class="text-base font-semibold mb-2 text-slate-900 dark:text-slate-100"
          >
            High performance
          </h3>
          <p class="text-sm text-slate-600 dark:text-slate-300">
            Stitches 2-20 images in under 2 seconds using optimized MATLAB
            vectorization.
          </p>
        </div>

        <div class="card p-5">
          <h3
            class="text-base font-semibold mb-2 text-slate-900 dark:text-slate-100"
          >
            Robust matching
          </h3>
          <p class="text-sm text-slate-600 dark:text-slate-300">
            RANSAC with 99.9% confidence handles outliers and varying
            viewpoints.
          </p>
        </div>

        <div class="card p-5">
          <h3
            class="text-base font-semibold mb-2 text-slate-900 dark:text-slate-100"
          >
            Seamless blending
          </h3>
          <p class="text-sm text-slate-600 dark:text-slate-300">
            Multi-band blending eliminates visible seams in final panorama.
          </p>
        </div>

        <div class="card p-5">
          <h3
            class="text-base font-semibold mb-2 text-slate-900 dark:text-slate-100"
          >
            From scratch
          </h3>
          <p class="text-sm text-slate-600 dark:text-slate-300">
            All algorithms implemented manually in MATLAB without built-in CV
            functions.
          </p>
        </div>
      </div>

      <h2>Results</h2>
      <ul>
        <li>Successfully stitches 2-20 images with minimal distortion</li>
        <li>Handles varying lighting conditions and viewpoints</li>
        <li>Processes images in 1-2 seconds on standard hardware</li>
        <li>Produces publication-quality panoramas with seamless blending</li>
      </ul>

      <h2>Challenges & Learnings</h2>
      <div class="not-prose space-y-4">
        <div class="card p-5">
          <p class="text-slate-900 dark:text-slate-100 font-semibold mb-2">
            Challenge: FAST detection producing too many weak corners
          </p>
          <p class="text-slate-600 dark:text-slate-400">
            Solution: Added Harris corner score filtering to keep only strong,
            stable corners.
          </p>
        </div>
        <div class="card p-5">
          <p class="text-slate-900 dark:text-slate-100 font-semibold mb-2">
            Challenge: Visible seams at image boundaries
          </p>
          <p class="text-slate-600 dark:text-slate-400">
            Solution: Implemented multi-band blending using Laplacian pyramids.
          </p>
        </div>
        <div class="card p-5">
          <p class="text-slate-900 dark:text-slate-100 font-semibold mb-2">
            Challenge: RANSAC occasionally failing with too few inliers
          </p>
          <p class="text-slate-600 dark:text-slate-400">
            Solution: Increased iterations to 1000+ and relaxed inlier threshold
            slightly.
          </p>
        </div>
      </div>

      <h2>Links</h2>
      <ul>
        <li>
          <a
            href="https://github.com/Gherra/Panorama-FastR-Stitch"
            target="_blank"
            rel="noopener noreferrer"
          >
            GitHub Repository
          </a>
        </li>
      </ul>
    </div>

    <!-- Navigation -->
    <nav
      class="mt-12 pt-8 border-t-2 border-slate-200 dark:border-slate-800 grid grid-cols-3 text-sm"
    >
      <a
        href="/projects/meethalf"
        class="inline-flex items-center gap-2 hover:text-slate-600 dark:hover:text-slate-400"
      >
        <span>←</span> MeetHalf
      </a>

      <a
        href="/"
        class="mx-auto hover:text-slate-600 dark:hover:text-slate-400"
      >
        Home
      </a>

      <a
        href="/projects/global-temperature-trends"
        class="justify-self-end inline-flex items-center gap-2 hover:text-slate-600 dark:hover:text-slate-400"
      >
        Climate Analysis <span>→</span>
      </a>
    </nav>
  </article>
</BaseLayout>
