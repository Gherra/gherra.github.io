---
import BaseLayout from "../../layouts/BaseLayout.astro";
---

<BaseLayout
    title="Global Temperature Trends Analysis — Raman Kumar"
    description="Analyzing 25 years of global city temperature data to detect climate change patterns using PySpark and robust statistics."
>
    <article class="max-w-4xl mx-auto px-4 py-12">
        <!-- Back Button -->
        <a
            href="/"
            class="inline-flex items-center gap-2 text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white mb-8 transition-colors"
        >
            <svg
                class="w-5 h-5"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
            </svg>
            Back
        </a>

        <!-- Header -->
        <header
            class="mb-12 border-l-4 border-purple-500 pl-6 bg-slate-50 dark:bg-slate-900 border-2 border-slate-200 dark:border-slate-800 p-8"
        >
            <div class="space-y-4">
                <div class="flex items-center gap-3 flex-wrap">
                    <span
                        class="px-3 py-1 text-xs font-mono uppercase bg-purple-500 text-white"
                    >
                        Data Science
                    </span>
                    <span class="text-sm text-slate-600 dark:text-slate-400">
                        January 2024
                    </span>
                </div>

                <h1 class="text-4xl md:text-5xl font-bold">
                    Global Temperature Trends Analysis
                </h1>

                <p class="text-lg text-slate-600 dark:text-slate-400 max-w-2xl">
                    Analyzing 25 years of global city temperature data
                    (2000-2024) to detect climate change patterns using PySpark,
                    robust statistics, and seasonal balance controls.
                </p>

                <div class="flex flex-wrap gap-3">
                    <a
                        href="https://github.com/Gherra/global-temperature-trends-analysis"
                        target="_blank"
                        rel="noopener noreferrer"
                        class="px-5 py-2 bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-medium border-2 border-slate-900 dark:border-white hover:bg-white dark:hover:bg-slate-900 hover:text-slate-900 dark:hover:text-white transition-colors"
                    >
                        View Code
                    </a>
                </div>
            </div>
        </header>

        <!-- Stats Grid -->
        <section class="mb-8 grid grid-cols-2 md:grid-cols-4 gap-4">
            <div class="stat-card">
                <div
                    class="text-xs font-mono uppercase text-slate-500 dark:text-slate-400 mb-1"
                >
                    Cities
                </div>
                <div class="text-xl font-bold">92</div>
            </div>
            <div class="stat-card">
                <div
                    class="text-xs font-mono uppercase text-slate-500 dark:text-slate-400 mb-1"
                >
                    Time Range
                </div>
                <div class="text-sm font-semibold">2000–2024</div>
            </div>
            <div class="stat-card">
                <div
                    class="text-xs font-mono uppercase text-slate-500 dark:text-slate-400 mb-1"
                >
                    Data Size
                </div>
                <div class="text-sm font-semibold">4.5GB</div>
            </div>
            <div class="stat-card">
                <div
                    class="text-xs font-mono uppercase text-slate-500 dark:text-slate-400 mb-1"
                >
                    Warming Rate
                </div>
                <div class="text-sm font-semibold">0.29°C/decade</div>
            </div>
        </section>

        <!-- Figures -->
        <section class="mb-8 space-y-6">
            <div class="border-2 border-slate-200 dark:border-slate-800">
                <img
                    src="/images/climate/figure1.png"
                    alt="Temperature trends by city"
                    class="w-full h-auto"
                />
            </div>
            <div class="border-2 border-slate-200 dark:border-slate-800">
                <img
                    src="/images/climate/figure2.png"
                    alt="Seasonal balance analysis"
                    class="w-full h-auto"
                />
            </div>
            <div class="border-2 border-slate-200 dark:border-slate-800">
                <img
                    src="/images/climate/figure3.png"
                    alt="Global warming trends map"
                    class="w-full h-auto"
                />
            </div>
        </section>

        <p
            class="mb-12 text-sm text-slate-500 dark:text-slate-400 border-l-2 border-slate-300 dark:border-slate-700 pl-4"
        >
            <strong class="text-slate-700 dark:text-slate-300">Top:</strong> Temperature
            trends for 92 cities showing median warming of 0.29°C/decade.
            <strong class="text-slate-700 dark:text-slate-300">Middle:</strong> Seasonal
            balance controls correct for data collection bias.
            <strong class="text-slate-700 dark:text-slate-300">Bottom:</strong> Geographic
            distribution of warming patterns.
        </p>

        <!-- At a Glance -->
        <section class="mb-8 card p-6 border-l-4 border-purple-500">
            <h2 class="text-xl font-bold mb-4">Overview</h2>
            <ul class="space-y-2 text-slate-600 dark:text-slate-300 text-sm">
                <li>
                    <strong class="text-slate-900 dark:text-slate-100"
                        >Problem:</strong
                    > Detecting climate change patterns in noisy temperature data
                    while accounting for seasonal bias and outliers.
                </li>
                <li>
                    <strong class="text-slate-900 dark:text-slate-100"
                        >Solution:</strong
                    > PySpark ETL pipeline with Theil-Sen robust regression and seasonal
                    normalization across hemispheres.
                </li>
            </ul>
        </section>

        <!-- Main Content -->
        <div
            class="card prose prose-slate dark:prose-invert max-w-none
            prose-headings:scroll-mt-24
            prose-h2:text-2xl prose-h2:font-bold prose-h2:mt-10 prose-h2:mb-4
            prose-h3:text-lg prose-h3:font-semibold prose-h3:mt-6 prose-h3:mb-3
            prose-p:text-slate-700 dark:prose-p:text-slate-300
            prose-p:leading-relaxed
            prose-a:text-purple-600 dark:prose-a:text-purple-400 hover:prose-a:underline
            prose-strong:text-slate-900 dark:prose-strong:text-slate-100
            px-6 py-8"
        >
            <h2>Problem & Motivation</h2>
            <p>
                Climate data is inherently noisy and prone to measurement bias.
                Simple linear regression can be skewed by outliers, and uneven
                sampling across seasons can create false trends. The goal was to
                build a robust analysis pipeline that accurately detects warming
                patterns.
            </p>

            <h2>Dataset</h2>
            <p>
                Historical daily temperature data from 92 major cities worldwide
                (2000-2024):
            </p>
            <ul>
                <li>4.5GB of raw temperature readings from weather stations</li>
                <li>Cities span both Northern and Southern hemispheres</li>
                <li>Includes major urban centers across 6 continents</li>
                <li>Daily mean, min, and max temperatures</li>
            </ul>

            <h2>Technical Approach</h2>

            <h3>1. Data Processing Pipeline (PySpark)</h3>
            <ul>
                <li>Distributed ETL using PySpark for 4.5GB dataset</li>
                <li>BallTree spatial indexing for nearest-station mapping</li>
                <li>Removed invalid readings and normalized units</li>
                <li>Aggregated daily readings to monthly averages</li>
            </ul>

            <h3>2. Seasonal Balance Controls</h3>
            <p>Critical innovation to correct for data collection bias:</p>
            <ul>
                <li>
                    Weather stations often have uneven sampling (e.g., more
                    winter data)
                </li>
                <li>
                    Separate normalization for Northern/Southern hemispheres
                </li>
                <li>
                    Ensures equal representation of all seasons in trend
                    analysis
                </li>
                <li>Prevents false warming trends from sampling artifacts</li>
            </ul>

            <h3>3. Robust Trend Estimation</h3>
            <p>Used Theil-Sen regression instead of ordinary least squares:</p>
            <ul>
                <li>
                    Computes median of all pairwise slopes (not just line of
                    best fit)
                </li>
                <li>Resistant to outliers and extreme weather events</li>
                <li>No assumptions about error distribution</li>
                <li>Provides reliable estimates even with noisy data</li>
            </ul>

            <h2>Key Results</h2>
            <ul>
                <li>
                    <strong>83.7% of cities show warming trends</strong> (0.29°C/decade
                    median)
                </li>
                <li>
                    Strongest warming in Northern cities (Europe, North America)
                </li>
                <li>Southern Hemisphere shows more variability</li>
                <li>Urban heat island effects visible in large cities</li>
                <li>
                    Seasonal balance controls reduced false positives by 15%
                </li>
            </ul>

            <h2>Tech Stack</h2>
            <ul>
                <li>
                    <strong>PySpark:</strong> Distributed data processing and ETL
                </li>
                <li>
                    <strong>Python:</strong> Analysis scripts and visualization
                </li>
                <li>
                    <strong>scikit-learn:</strong> BallTree for spatial indexing
                </li>
                <li>
                    <strong>pandas & NumPy:</strong> Data manipulation and statistics
                </li>
                <li>
                    <strong>matplotlib & seaborn:</strong> Data visualization
                </li>
            </ul>

            <h2>Challenges & Solutions</h2>
            <div class="not-prose space-y-4">
                <div class="card p-5">
                    <p
                        class="text-slate-900 dark:text-slate-100 font-semibold mb-2"
                    >
                        Challenge: Seasonal sampling bias inflating warming
                        trends
                    </p>
                    <p class="text-slate-600 dark:text-slate-400">
                        Solution: Implemented hemisphere-aware seasonal
                        normalization to ensure equal representation of all
                        seasons.
                    </p>
                </div>
                <div class="card p-5">
                    <p
                        class="text-slate-900 dark:text-slate-100 font-semibold mb-2"
                    >
                        Challenge: Outliers from heat waves skewing results
                    </p>
                    <p class="text-slate-600 dark:text-slate-400">
                        Solution: Used Theil-Sen robust regression which is
                        resistant to outliers.
                    </p>
                </div>
                <div class="card p-5">
                    <p
                        class="text-slate-900 dark:text-slate-100 font-semibold mb-2"
                    >
                        Challenge: Processing 4.5GB dataset efficiently
                    </p>
                    <p class="text-slate-600 dark:text-slate-400">
                        Solution: Leveraged PySpark for distributed processing
                        and BallTree for O(log n) nearest-neighbor lookups.
                    </p>
                </div>
            </div>

            <h2>Links</h2>
            <ul>
                <li>
                    <a
                        href="https://github.com/Gherra/global-temperature-trends-analysis"
                        target="_blank"
                        rel="noopener noreferrer"
                    >
                        GitHub Repository
                    </a>
                </li>
            </ul>
        </div>

        <!-- Navigation -->
        <nav
            class="mt-12 pt-8 border-t-2 border-slate-200 dark:border-slate-800 grid grid-cols-3 text-sm"
        >
            <a
                href="/projects/panorama-fastr-stitch"
                class="inline-flex items-center gap-2 hover:text-slate-600 dark:hover:text-slate-400"
            >
                <span>←</span> Panorama
            </a>

            <a
                href="/"
                class="mx-auto hover:text-slate-600 dark:hover:text-slate-400"
            >
                Home
            </a>

            <span></span>
        </nav>
    </article>
</BaseLayout>
