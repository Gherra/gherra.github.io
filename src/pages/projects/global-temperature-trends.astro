---
import BaseLayout from "../../layouts/BaseLayout.astro";
---

<BaseLayout
    title="Global Temperature Trends Analysis — Raman Kumar"
    description="Analyzing 25 years of global city temperature data to detect climate change patterns."
>
    <article class="max-w-4xl mx-auto px-4 py-12">
        <!-- Back Button -->
        <a
            href="/"
            class="inline-flex items-center gap-2 text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 mb-8 transition-colors"
        >
            <svg
                class="w-5 h-5"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
            </svg>
            Back to Home
        </a>

        <!-- Header -->
        <!-- Header -->
        <header
            class="relative mb-12 -mx-4 md:mx-0 overflow-hidden rounded-2xl border border-slate-200/60 dark:border-slate-700/60"
        >
            <!-- Base soft gradient -->
            <div
                class="relative bg-gradient-to-br from-amber-50 to-rose-100 dark:from-amber-950 dark:to-rose-900"
            >
                <div class="px-4 md:px-8 py-10">
                    <div class="flex items-center gap-3 mb-4">
                        <span
                            class="px-3 py-1 rounded-full text-sm font-medium bg-gradient-to-r from-amber-600 to-rose-600 text-white shadow-sm"
                        >
                            Data Science
                        </span>

                        <span class="text-slate-600/80 dark:text-slate-300/80">
                            January 2024 • Course Project
                        </span>
                    </div>

                    <h1 class="text-4xl md:text-5xl font-bold tracking-tight">
                        <span
                            class="bg-clip-text text-transparent bg-gradient-to-r from-slate-900 to-slate-700 dark:from-white dark:to-slate-300"
                        >
                            Global Temperature Trends Analysis
                        </span>
                    </h1>

                    <p
                        class="mt-3 text-lg text-slate-700/90 dark:text-slate-300/90 max-w-3xl"
                    >
                        Analyzing 25 years of global city temperature data
                        (2000–2024) across 90+ cities to detect climate change
                        patterns using PySpark, robust regression, and seasonal
                        balance controls.
                    </p>

                    <div class="flex flex-wrap gap-3 mt-6">
                        <a
                            href="https://github.com/Gherra/global-temperature-trends-analysis"
                            target="_blank"
                            rel="noopener noreferrer"
                            class="px-5 py-2 rounded-xl font-medium text-white bg-gradient-to-r from-amber-600 to-rose-600 hover:scale-[1.02] active:scale-[.99] transition"
                        >
                            View Code
                        </a>
                    </div>
                </div>
            </div>

            <!-- Decorative radial blobs (muted) -->
            <div
                class="pointer-events-none absolute inset-0 mix-blend-multiply opacity-50"
            >
                <div
                    class="absolute -top-10 -left-16 w-64 h-64 rounded-full blur-3xl"
                    style="background:radial-gradient(60% 60% at 50% 50%, rgba(251,191,36,0.25), transparent)"
                >
                </div>
                <div
                    class="absolute -bottom-16 -right-10 w-72 h-72 rounded-full blur-3xl"
                    style="background:radial-gradient(60% 60% at 50% 50%, rgba(244,114,182,0.25), transparent)"
                >
                </div>
            </div>
        </header>

        <!-- Stats Grid -->
        <section class="mb-6 grid grid-cols-2 md:grid-cols-4 gap-3">
            <div class="glass panel p-4 text-center">
                <div
                    class="text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400"
                >
                    Cities
                </div>
                <div class="mt-1 text-xl font-semibold">92</div>
            </div>
            <div class="glass panel p-4 text-center">
                <div
                    class="text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400"
                >
                    Warming Rate
                </div>
                <div class="mt-1 text-xl font-semibold">0.29°C/decade</div>
            </div>
            <div class="glass panel p-4 text-center">
                <div
                    class="text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400"
                >
                    Data Size
                </div>
                <div class="mt-1 text-xl font-semibold">4.5GB</div>
            </div>
            <div class="glass panel p-4 text-center">
                <div
                    class="text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400"
                >
                    Warming Cities
                </div>
                <div class="mt-1 text-xl font-semibold">83.7%</div>
            </div>
        </section>

        <!-- Results Images -->
        <!-- Results Images -->
        <section class="mt-6 mb-8 space-y-6">
            <!-- Figure 1: 4-panel overview -->
            <div class="glass panel overflow-hidden p-4">
                <img
                    src="/images/climate/figure1.png"
                    alt="Temperature trends overview"
                    class="w-full h-auto"
                />
                <p class="mt-3 text-sm text-slate-500 dark:text-slate-400">
                    <strong class="text-slate-600 dark:text-slate-300"
                        >Figure 1: Temperature Trends Overview</strong
                    ><br />
                    (a) Trend vs Latitude scatter with 10° bin medians, (b) Distribution
                    histogram with KDE, (c) Trend vs R² hexbin, (d) Global map with
                    diverging colors showing temperature change.
                </p>
            </div>

            <!-- Figure 2: Time series evolution -->
            <div class="glass panel overflow-hidden p-4">
                <img
                    src="/images/climate/figure2.png"
                    alt="Temperature evolution by latitude"
                    class="w-full h-auto"
                />
                <p class="mt-3 text-sm text-slate-500 dark:text-slate-400">
                    <strong class="text-slate-600 dark:text-slate-300"
                        >Figure 2: Temperature Evolution by Latitude Band</strong
                    ><br />
                    Time series plot with 4 colored bands, LOESS smoothed lines,
                    uncertainty ribbons, and bar chart of per-city trend medians
                    below.
                </p>
            </div>

            <!-- Figure 3: Statistical validation -->
            <div class="glass panel overflow-hidden p-4">
                <img
                    src="/images/climate/figure3.png"
                    alt="Statistical validation"
                    class="w-full h-auto"
                />
                <p class="mt-3 text-sm text-slate-500 dark:text-slate-400">
                    <strong class="text-slate-600 dark:text-slate-300"
                        >Figure 3: Advanced Statistical Analysis</strong
                    ><br />
                    Q-Q plot with Shapiro-Wilk results, histogram vs normal distribution,
                    climate zone boxplots with Kruskal-Wallis results, outlier detection
                    boxplot.
                </p>
            </div>
        </section>

        <!-- At a Glance -->
        <section class="mb-8 glass panel p-6">
            <h2 class="text-xl font-bold mb-4">At a Glance</h2>
            <ul class="space-y-2 text-slate-600 dark:text-slate-300">
                <li>
                    <strong class="text-slate-900 dark:text-slate-100"
                        >Problem:</strong
                    > Detecting climate change patterns in noisy, fragmented weather
                    data with uneven global coverage.
                </li>
                <li>
                    <strong class="text-slate-900 dark:text-slate-100"
                        >Solution:</strong
                    > PySpark pipeline for distributed processing, strict seasonal
                    balance controls, Theil-Sen robust regression, and non-parametric
                    statistical framework.
                </li>
            </ul>
        </section>

        <!-- Main Content -->
        <div
            class="glass panel prose prose-lg prose-slate dark:prose-invert max-w-none
            prose-headings:scroll-mt-24
            prose-h2:mt-10 prose-h2:mb-4 prose-h2:tracking-tight
            prose-h3:mt-6 prose-h3:mb-3
            prose-p:leading-relaxed
            prose-li:marker:text-slate-400
            prose-a:text-orange-600 dark:prose-a:text-red-300 hover:prose-a:underline
            px-5 md:px-8 py-6 md:py-8"
        >
            <h2>Project Overview</h2>
            <p>
                This analysis reveals widespread global warming with <strong
                    >83.7% of cities showing positive temperature trends</strong
                > and a median warming rate of <strong>0.29°C per decade</strong
                >. The project demonstrates advanced data science techniques for
                handling noisy, fragmented climate data while ensuring
                statistical rigor and geographic representativeness.
            </p>

            <h2>The Problem</h2>
            <p>
                Analyzing global temperature trends presents several challenges:
            </p>
            <ul>
                <li>
                    <strong>Uneven data distribution:</strong> Weather stations concentrated
                    in North America and Europe, leaving other regions underrepresented
                </li>
                <li>
                    <strong>Seasonal bias:</strong> Missing winter data in cold climates
                    artificially inflates warming trends (e.g., Yellowknife showing
                    unrealistic +2.61°C/decade)
                </li>
                <li>
                    <strong>Data fragmentation:</strong> Many stations have gaps
                    in their records or collect unreasonable values during certain
                    seasons
                </li>
                <li>
                    <strong>Noisy measurements:</strong> Daily weather data contains
                    significant variance requiring robust statistical methods
                </li>
            </ul>

            <h2>Data Engineering Pipeline</h2>

            <h3>Data Sources & Processing</h3>
            <ul>
                <li>
                    <strong>Raw data:</strong> GHCN-Daily (Global Historical Climatology
                    Network) accessed via SFU computing cluster
                </li>
                <li>
                    <strong>Data size:</strong> ~4.5GB of daily observations (2000-2024)
                </li>
                <li>
                    <strong>Distributed processing:</strong> PySpark for efficient
                    extraction and quality checks
                </li>
                <li>
                    <strong>Aggregation:</strong> Daily data converted to weekly
                    averages for local processing (10x size reduction)
                </li>
            </ul>

            <h3>Spatial Matching</h3>
            <p>
                Used <strong>BallTree spatial indexing</strong> with haversine distance
                calculations to match weather stations to their nearest cities within
                100km. This approach efficiently handles ~10,000 stations and 1000+
                candidate cities.
            </p>

            <h3>Quality Control</h3>
            <p>Strict filtering requirements ensure data reliability:</p>
            <ul>
                <li>
                    <strong>15+ years of coverage:</strong> Minimum temporal span
                    for trend detection
                </li>
                <li>
                    <strong>80%+ completeness:</strong> At least 4 out of 5 years
                    must have data
                </li>
                <li>
                    <strong>≤50km distance:</strong> Station must be close enough
                    to represent city conditions
                </li>
            </ul>

            <h3>Geographic Sampling</h3>
            <p>
                Quota-based selection across latitude and longitude bands
                ensures global representation despite data concentration in
                North America/Europe. Final dataset: <strong>92 cities</strong> spanning
                all continents with balanced geographic coverage.
            </p>

            <h2>Methodology: Seasonal Balance Controls</h2>
            <p>
                The most critical innovation was implementing <strong
                    >strict seasonal balance requirements</strong
                > to prevent bias from missing winter data:
            </p>

            <div
                class="not-prose my-6 p-5 rounded-lg bg-orange-50 dark:bg-orange-950/50 border border-orange-200 dark:border-orange-800"
            >
                <p class="text-sm text-slate-700 dark:text-slate-300 mb-3">
                    <strong class="text-slate-900 dark:text-slate-100"
                        >Seasonal Balance Requirements (per year):</strong
                    >
                </p>
                <ul
                    class="text-sm text-slate-600 dark:text-slate-400 space-y-1"
                >
                    <li>✓ At least 47 weeks of data (90% temporal coverage)</li>
                    <li>✓ Representation from at least 11 distinct months</li>
                    <li>
                        ✓ Minimum 8 weeks from each meteorological season (DJF,
                        MAM, JJA, SON)
                    </li>
                </ul>
            </div>

            <p>
                <strong>Impact:</strong> Corrected Yellowknife from unrealistic +2.61°C/decade
                to realistic +1.3°C/decade, ensuring scientifically valid results
                across all cities.
            </p>

            <h2>Robust Statistical Methods</h2>

            <h3>Theil-Sen Regression</h3>
            <p>
                <strong>Primary method</strong> for trend estimation:
            </p>
            <ul>
                <li>
                    <strong>Outlier resistant:</strong> Uses median of all pairwise
                    slopes instead of least squares
                </li>
                <li>
                    <strong>No assumptions:</strong> Doesn't require normal distribution
                </li>
                <li>
                    <strong>Climate standard:</strong> Widely used in climate research
                    for noisy temperature data
                </li>
                <li>
                    <strong>Why not OLS?</strong> Ordinary Least Squares is too sensitive
                    to seasonal bias and outliers
                </li>
            </ul>

            <h3>Non-Parametric Testing</h3>
            <p>
                Since temperature trends are <strong
                    >not normally distributed</strong
                > (Shapiro-Wilk p=0.035), we used:
            </p>
            <ul>
                <li>
                    <strong>Binomial test:</strong> Warming prevalence vs 50% baseline
                    (p &lt; 0.000001)
                </li>
                <li>
                    <strong>Kruskal-Wallis test:</strong> Climate zone comparisons
                    (no significant differences, p=0.088)
                </li>
                <li>
                    <strong>Mann-Whitney U:</strong> Pairwise regional comparisons
                </li>
            </ul>

            <h2>Key Results</h2>

            <h3>Global Warming Pattern</h3>
            <ul>
                <li>
                    <strong>77 of 92 cities (83.7%)</strong> show statistically significant
                    warming trends
                </li>
                <li><strong>Median warming rate:</strong> 0.29°C per decade</li>
                <li>
                    <strong>Statistical significance:</strong> p &lt; 0.000001 compared
                    to random chance
                </li>
                <li>
                    <strong>Geographic pattern:</strong> Warming appears globally,
                    not confined to specific latitudes (r=0.166, p=0.114)
                </li>
            </ul>

            <h3>Extreme Cases</h3>
            <p>
                <strong>Strongest warming:</strong>
            </p>
            <ul>
                <li>
                    Utqiagvik, Alaska: +1.31°C/decade (Arctic amplification)
                </li>
                <li>Postmasburg, South Africa: +0.85°C/decade</li>
                <li>Onslow, Australia: +0.82°C/decade</li>
            </ul>
            <p>
                <strong>Cooling trends:</strong>
            </p>
            <ul>
                <li>Tagbilaran City, Philippines: -0.25°C/decade</li>
                <li>Stykkishólmur, Iceland: -0.25°C/decade</li>
            </ul>

            <h3>Regional Consistency</h3>
            <p>
                Analysis by latitude bands (High Northern, Low Northern, Low
                Southern, High Southern) shows <strong
                    >modest and non-significant differences</strong
                > between regions. Warming is a global phenomenon rather than being
                confined to specific climate zones.
            </p>

            <h2>Technical Implementation</h2>

            <h3>Tech Stack</h3>
            <ul>
                <li>
                    <strong>PySpark:</strong> Distributed processing for 4.5GB dataset
                </li>
                <li>
                    <strong>pandas/NumPy:</strong> Local data manipulation and analysis
                </li>
                <li>
                    <strong>scikit-learn:</strong> BallTree spatial indexing
                </li>
                <li>
                    <strong>scipy/statsmodels:</strong> Statistical testing and robust
                    regression
                </li>
                <li>
                    <strong>matplotlib/seaborn:</strong> Publication-quality visualizations
                </li>
            </ul>

            <h3>Key Algorithms</h3>
            <ul>
                <li>
                    <strong>BallTree:</strong> Efficient nearest-neighbor search
                    for station-city matching
                </li>
                <li>
                    <strong>Theil-Sen estimator:</strong> Outlier-resistant trend
                    calculation
                </li>
                <li>
                    <strong>LOESS smoothing:</strong> Temporal pattern visualization
                    with uncertainty
                </li>
                <li>
                    <strong>Non-parametric tests:</strong> Statistical validation
                    without normality assumptions
                </li>
            </ul>

            <h2>Challenges & Solutions</h2>
            <div class="not-prose space-y-4">
                <div class="glass panel p-5">
                    <p
                        class="text-slate-900 dark:text-slate-100 font-semibold mb-2"
                    >
                        Challenge: OLS regression produced unrealistic warming
                        rates (>3°C/decade).
                    </p>
                    <p class="text-slate-600 dark:text-slate-400">
                        Solution: Switched to Theil-Sen robust regression, which
                        handles outliers and seasonal bias effectively.
                    </p>
                </div>
                <div class="glass panel p-5">
                    <p
                        class="text-slate-900 dark:text-slate-100 font-semibold mb-2"
                    >
                        Challenge: Missing winter data in Arctic cities inflated
                        warming trends.
                    </p>
                    <p class="text-slate-600 dark:text-slate-400">
                        Solution: Implemented seasonal balance controls
                        requiring data from all 4 meteorological seasons.
                    </p>
                </div>
                <div class="glass panel p-5">
                    <p
                        class="text-slate-900 dark:text-slate-100 font-semibold mb-2"
                    >
                        Challenge: Uneven station distribution (mostly North
                        America/Europe).
                    </p>
                    <p class="text-slate-600 dark:text-slate-400">
                        Solution: Quota-based geographic sampling to ensure
                        balanced global representation.
                    </p>
                </div>
            </div>

            <h2>Limitations</h2>
            <ul>
                <li>
                    <strong>City-centric approach:</strong> May not represent rural
                    or oceanic regions
                </li>
                <li>
                    <strong>Short timespan:</strong> 25 years is substantial but
                    relatively short for long-term climate analysis
                </li>
                <li>
                    <strong>Limited sample:</strong> 92 cities represent a small
                    fraction of world cities
                </li>
                <li>
                    <strong>Uneven distribution:</strong> Some regions better represented
                    than others despite quota sampling
                </li>
            </ul>

            <h2>Scientific Impact</h2>
            <p>
                This analysis provides <strong
                    >robust evidence for widespread global warming at city
                    scales</strong
                >. The 83.7% warming prevalence far exceeds random chance, with
                geographic consistency across all latitude bands and climate
                zones.
            </p>
            <p>
                The median warming rate of 0.29°C per decade observed across
                diverse global cities represents a significant climate signal
                that is both statistically robust and practically relevant for
                urban planning and climate adaptation strategies.
            </p>
            <p>
                From a technical perspective, this project demonstrates how to
                handle noisy, fragmented climate data using:
            </p>
            <ul>
                <li>Distributed processing for large datasets</li>
                <li>Seasonal bias detection and correction</li>
                <li>Robust statistical methods for outlier resistance</li>
                <li>Non-parametric testing for non-normal distributions</li>
            </ul>

            <h2>Links</h2>
            <ul>
                <li>
                    <a
                        href="https://github.com/Gherra/global-temperature-trends-analysis"
                        target="_blank"
                        rel="noopener noreferrer">GitHub Repository</a
                    >
                </li>
            </ul>
        </div>

        <!-- Navigation -->
        <nav
            class="mt-10 flex items-center justify-between text-sm text-slate-500"
        >
            <a
                href="/projects/panorama-fastr-stitch"
                class="inline-flex items-center gap-2 hover:text-slate-700 dark:hover:text-slate-300"
            >
                <span aria-hidden>←</span> Previous: Panorama FastR-Stitch
            </a>
            <a href="/" class="hover:text-slate-700 dark:hover:text-slate-300"
                >Back to Home</a
            >
        </nav>
    </article>
</BaseLayout>
